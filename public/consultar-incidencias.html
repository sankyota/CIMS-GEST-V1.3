<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  
  <title>Consultar Incidencias</title>
  <link rel="stylesheet" href="assets/styles.css" />
</head>
<body>

  <nav class="navbar">
    <a class="navbar-brand" href="/">
        <div class="navbar-brand"> ğŸ–¥ï¸ CIaMS GESTOR <span class="version">V1</span> </div>
    </a>
    <div class="navbar-links">
        <a href="/ver-activos" class="nav-link">
            ğŸ“¦ <span>Activos</span>
        </a>
        <a href="/consultar-empleados" class="nav-link">
            ğŸ‘¥ <span>Empleados</span>
        </a>
        <a href="/incidencias.html" class="nav-link">
            âš ï¸ <span>Incidencias</span>
        </a>
        <a href="/configuracion.html" class="nav-link">
            âš™ï¸ <span>ConfiguraciÃ³n</span>
        </a>
    </div>
</nav>

  <div class="container">
    <a href="/registrar-incidencia" class="back-button">â¬…ï¸ Regresar</a> 

    <h1 class="title">ğŸš¨ Incidencias Registradas</h1>

    <div class="search-bar">
        <label for="search">Buscar:</label>
        <input type="text" id="search" placeholder="Buscar por activo o empleado...">
        <button id="search-button" class="btn">ğŸ” Buscar</button>
        <button id="btn-exportar-todo">ğŸ“¥ Exportar PDF o Excel</button>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    </div>
    
    <div class="filter-bar"> 
      <div class="filter-group">
        <label for="filtro-area">Ãrea:</label>
        <select id="filtro-area">
          <option value="">Todas las Ã¡reas</option>
        </select>
      </div>

      <div class="filter-group">
        <label for="filtro-estado">Estado:</label>
        <select id="filtro-estado">
          <option value="">Todos</option>
          <option value="amarillo">No solucionados</option>
          <option value="verde">Solucionados</option>
        </select>
      </div>
    </div>

    <div class="table-container">
        <table class="data-table">
            <thead>
                <tr>
        <th>Activo</th>
        <th>Ãrea</th>
        <th>Empleado</th>
        <th>DescripciÃ³n</th>
        <th>Fecha Reporte</th>
        <th>Fecha SoluciÃ³n</th> 
        <th>DiagnÃ³stico IA</th>
        <th>Estado</th>
        <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td colspan="8" style="text-align: center;">Cargando incidencias...</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div style="margin-top: 10px; font-size: 14px; color: #333;">
        <strong>Leyenda Mantenimiento:</strong> &nbsp; ğŸŸ¢ Solucionado &nbsp; | &nbsp; ğŸŸ¡ Pendiente / En Proceso
    </div>
    
    <div id="pagination-controls" class="pagination-controls"></div>
  </div>
  <div id="exportModal" class="modal-overlay">
    <div class="modal-content">
        <span class="close-modal" id="modal-close">&times;</span>
        <h3>ğŸ“¥ Exportar Datos</h3>
        <p>Selecciona el formato:</p>
        <div class="export-options">
            <button id="btn-confirm-pdf" class="btn-export-option btn-pdf">
                ğŸ“„ Descargar PDF
            </button>
            <button id="btn-confirm-excel" class="btn-export-option btn-excel">
                ğŸ“Š Descargar Excel
            </button>
        </div>
    </div>
</div>

  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf-autotable@3.5.25/dist/jspdf.plugin.autotable.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>  
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="/consultar-incidencias.js"></script>
  <script src="/auth.js"></script>
  <script src="chatbot.js"></script>
</body>
</html>